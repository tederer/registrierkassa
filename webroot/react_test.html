<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<script type="text/javascript" src="javascripts/RequireMock.js"></script>
<script type="text/javascript" src="javascripts/NamespaceUtils.js"></script>
<script type="text/javascript" src="javascripts/common/namespace.js"></script>
<script type="text/javascript" src="javascripts/common/infrastructure/bus/Bus.js"></script>
<script type="text/javascript" src="javascripts/common/infrastructure/busbridge/BusBridge.js"></script>
<script type="text/javascript" src="javascripts/common/infrastructure/busbridge/ClientSocketIoBusBridge.js"></script>
<script type="text/javascript" src="javascripts/common/infrastructure/busbridge/connection/ClientSocketIoConnection.js"></script>
<script type="text/javascript" src="lib/jquery-3.1.0.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="lib/react-15.3.0.min.js"></script>
<script src="lib/react-dom-15.3.0.min.js"></script>
<script src="lib/babel-core-5.8.38.browser.min.js"></script>
<script>
   var bus = new common.infrastructure.bus.Bus();
   var busBridge = common.infrastructure.busbridge.ClientSocketIoBusBridge(bus, [], io);

   $(document).ready(function() {
   });
</script>
</head>

<body>
Client test
<div id="content"></div>

<script type="text/babel">
var ConnectionState = React.createClass({
   componentDidMount: function() {
      var thisInstance = this;
      bus.subscribeToPublication(common.infrastructure.busbridge.CONNECTION_STATE_TOPIC, function(data) {
         thisInstance.setState({connectionState: data});
      });
   },
   
   getInitialState: function() {
       return {connectionState: ''};
   },
   
  render: function() {
    return (
      <p>ConnectionState: {this.state.connectionState}</p>
    );
  }
});

ReactDOM.render(<ConnectionState/>, document.getElementById('content'));
</script>
</body>
</html>